/* 无障碍优化样式 */

/* 改进的颜色对比度系统 */
:root {
  /* 文字颜色 - 确保对比度符合WCAG AA标准 */
  --text-primary: #ffffff;      /* 对比度 21:1 - 主要文字 */
  --text-secondary: #e5e7eb;    /* 对比度 12.6:1 - 次要文字 */
  --text-tertiary: #d1d5db;     /* 对比度 8.2:1 - 三级文字 */
  --text-muted: #b8c4ce;        /* 对比度 5.2:1 - 静音文字 (改进后) */
  --text-disabled: #9ca3af;     /* 对比度 4.5:1 - 禁用状态 */
  
  /* 链接颜色 */
  --link-default: #60a5fa;      /* 对比度 7.2:1 */
  --link-hover: #93c5fd;        /* 对比度 5.8:1 */
  --link-visited: #c4b5fd;      /* 对比度 6.1:1 */
  
  /* 状态颜色 */
  --success: #10b981;           /* 对比度 4.8:1 */
  --warning: #f59e0b;           /* 对比度 4.7:1 */
  --error: #ef4444;             /* 对比度 4.9:1 */
  --info: #3b82f6;              /* 对比度 5.1:1 */
}

/* 应用改进的文字颜色 */
.text-primary { color: var(--text-primary) !important; }
.text-secondary { color: var(--text-secondary) !important; }
.text-tertiary { color: var(--text-tertiary) !important; }
.text-muted { color: var(--text-muted) !important; }

/* 替换原有的低对比度类 */
.text-gray-400 { color: var(--text-muted) !important; }
.text-gray-500 { color: var(--text-disabled) !important; }

/* 改进的焦点指示器 */
.focus-visible {
  outline: 2px solid var(--link-default) !important;
  outline-offset: 2px !important;
  border-radius: 4px !important;
}

/* 按钮焦点状态 */
button:focus-visible,
.btn:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid var(--link-default) !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.2) !important;
}

/* 链接焦点状态 */
a:focus-visible {
  outline: 2px solid var(--link-default) !important;
  outline-offset: 2px !important;
  border-radius: 2px !important;
  text-decoration: underline !important;
}

/* 输入框焦点状态 */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid var(--link-default) !important;
  outline-offset: 2px !important;
  border-color: var(--link-default) !important;
}

/* 跳过链接 - 键盘用户快速导航 */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--text-primary);
  color: #000000;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;
  font-weight: 600;
}

.skip-link:focus {
  top: 6px;
}

/* 屏幕阅读器专用文本 */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  :root {
    --text-primary: #ffffff;
    --text-secondary: #ffffff;
    --text-tertiary: #ffffff;
    --text-muted: #ffffff;
  }
  
  .bg-black\/40,
  .bg-black\/60 {
    background-color: #000000 !important;
    border: 2px solid #ffffff !important;
  }
}

/* 减少动画偏好支持 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .animate-pulse,
  .animate-spin,
  .animate-bounce {
    animation: none !important;
  }
}

/* 触摸设备优化 */
@media (pointer: coarse) {
  /* 最小触摸目标尺寸 */
  button,
  [role="button"],
  a,
  input,
  textarea,
  select {
    min-height: 44px !important;
    min-width: 44px !important;
  }
  
  /* 增加触摸间距 */
  .touch-spacing > * + * {
    margin-top: 16px !important;
  }
}

/* ARIA状态样式 */
[aria-expanded="true"] .expand-icon {
  transform: rotate(180deg);
}

[aria-disabled="true"] {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
}

[aria-hidden="true"] {
  display: none !important;
}

/* 错误状态样式 */
[aria-invalid="true"] {
  border-color: var(--error) !important;
  box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2) !important;
}

/* 必填字段指示 */
[aria-required="true"]::after {
  content: " *";
  color: var(--error);
  font-weight: bold;
}

/* 加载状态 */
[aria-busy="true"] {
  cursor: wait;
  opacity: 0.7;
}

/* 实时区域 */
[aria-live="polite"],
[aria-live="assertive"] {
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

[aria-live="polite"]:not(:empty),
[aria-live="assertive"]:not(:empty) {
  position: static;
  width: auto;
  height: auto;
  overflow: visible;
}

